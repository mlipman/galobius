<!DOCTYPE html>
<html>
  <head>
    <title>Globe with Longitude Lines</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
      // Initialize scene, camera, and renderer
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer({antialias: true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Position camera
      camera.position.z = 15;

      // Add lighting
      scene.add(new THREE.AmbientLight(0xffffff, 0.5));
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      directionalLight.position.set(5, 3, 5);
      scene.add(directionalLight);

      // Create Earth sphere
      const textureLoader = new THREE.TextureLoader();
      const earthTexture = textureLoader.load(
        "https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg",
        () => {
          earthMaterial.needsUpdate = true;
        }
      );

      const earthGeometry = new THREE.SphereGeometry(5, 64, 64);
      const earthMaterial = new THREE.MeshPhongMaterial({
        map: earthTexture,
        bumpScale: 0.05,
        specular: new THREE.Color("grey"),
        shininess: 5,
      });

      const earth = new THREE.Mesh(earthGeometry, earthMaterial);
      scene.add(earth);

      // Add variables for longitude lines
      let longitude1 = 20; // Initial value
      let longitude2 = -50; // Initial value

      // Create simple UI controls
      const controls1 = document.createElement("input");
      controls1.type = "range";
      controls1.min = -180;
      controls1.max = 180;
      controls1.value = longitude1;
      controls1.style.position = "absolute";
      controls1.style.top = "10px";
      controls1.style.left = "10px";
      document.body.appendChild(controls1);

      const controls2 = document.createElement("input");
      controls2.type = "range";
      controls2.min = -180;
      controls2.max = 180;
      controls2.value = longitude2;
      controls2.style.position = "absolute";
      controls2.style.top = "30px";
      controls2.style.left = "10px";
      document.body.appendChild(controls2);

      // Function to create longitude lines
      function createLongitudeLine(longitudeDegrees, radius, color) {
        const points = [];
        const longitude = THREE.MathUtils.degToRad(longitudeDegrees);

        // Create more lines with smaller offsets for a more solid appearance
        for (let offset = -0.015; offset <= 0.015; offset += 0.002) {
          // Smaller step size and range
          for (let lat = -90; lat <= 90; lat += 1) {
            const phi = THREE.MathUtils.degToRad(lat);
            const adjustedLongitude = longitude + offset;
            const x = radius * Math.cos(phi) * Math.cos(adjustedLongitude);
            const y = radius * Math.sin(phi);
            const z = radius * Math.cos(phi) * Math.sin(adjustedLongitude);
            points.push(new THREE.Vector3(x, y, z));
          }
        }

        const geometry = new THREE.BufferGeometry().setFromPoints(points);
        const material = new THREE.LineBasicMaterial({
          color: color,
          opacity: 0.8, // Added some transparency
          transparent: true, // Enable transparency
        });

        return new THREE.Line(geometry, material);
      }

      // Add longitude lines
      let line20E = createLongitudeLine(longitude1, 5.01, 0xff0000);
      let line50W = createLongitudeLine(longitude2, 5.01, 0xff0000);
      scene.add(line20E, line50W);

      // Add orbit controls
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.rotateSpeed = 0.5;

      // Handle window resize
      window.addEventListener("resize", onWindowResize, false);
      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);

        // Update longitude lines if values changed
        if (longitude1 !== controls1.value || longitude2 !== controls2.value) {
          longitude1 = Number(controls1.value);
          longitude2 = Number(controls2.value);

          // Remove existing lines
          scene.remove(line20E, line50W);

          // Create new lines with updated values
          line20E = createLongitudeLine(longitude1, 5.01, 0xff0000);
          line50W = createLongitudeLine(longitude2, 5.01, 0xff0000);
          scene.add(line20E, line50W);
        }

        controls.update();
        renderer.render(scene, camera);
      }
      animate();
    </script>
  </body>
</html>
